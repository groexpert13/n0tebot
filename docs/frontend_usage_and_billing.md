Цель
- Короткая памятка фронтенду, где брать метрики использования (токены, аудио) и данные подписки из `app_users`.

Источник данных
- Таблица: `public.app_users` (см. `db.md`).

Токены (TEXT)
- Хранение:
  - `text_tokens_used_total` — суммарные токены за текст (вход + выход).
  - Дополнительно (если применена миграция `supabase_migrations/2025-09-07_add_text_token_splits.sql`):
    - `text_input_tokens_total` — входные токены.
    - `text_output_tokens_total` — выходные токены.
- Отображение в UI:
  - Показываем пользователю «токены» как сумму входных и выходных.
  - Т.е. используйте `text_tokens_used_total` как основное значение.
  - При желании можно показывать раздельно вход/выход, если колонки есть.

Аудио/видео (VOICE, VIDEO_NOTE)
- Хранение:
  - `audio_minutes_total` — хранит СЕКУНДЫ (название историческое). Бэкенд пишет сюда время аудио/видео-кружков в секундах.
  - `audio_generations_total` — количество обработок аудио/видео.
- Отображение в UI:
  - Для секунд: используйте значение как есть.
  - Для минут: делите на 60 и округляйте/форматируйте по требованиям дизайна.

Счётчики генераций
- `text_generations_total` — количество текстовых генераций.
- `audio_generations_total` — количество генераций по аудио/видео.

Подписка
- Поля:
  - `subscription_status` — статус (`none`/`active`/и т.п.).
  - `subscription_renew_at` — дата/время окончания (UTC). Показывайте пользователю с локализацией тайзоны клиента.
- Дата начала подписки:
  - Отдельного поля в текущей схеме нет. Если нужна точная дата старта — сообщите, добавим `subscription_started_at` через миграцию.
  - Временным суррогатом можно использовать `created_at` для аккаунта (НЕ то же самое, если подписка оформляется позже).

Заметки по времени и TZ
- Времена в БД — в UTC.
- Для пользователя форматируйте с учётом `timezone` или `utc_offset_minutes` из `app_users`.

Реальная загрузка
- Читайте одну строку `app_users` по `tg_user_id` для экрана профиля/статистики.
- Фильтруйте `deleted_at IS NULL` для заметок в `notes`.

